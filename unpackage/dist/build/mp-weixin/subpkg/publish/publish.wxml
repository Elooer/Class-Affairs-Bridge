<view><uni-nav-bar vue-id="d81588a8-1" title="{{title}}" statusBar="{{true}}" backgroundColor="#127ddb" color="#ffffff" fixed="true" left-icon="left" left-text="返回" data-event-opts="{{[['^clickLeft',[['back']]]]}}" bind:clickLeft="__e" bind:__l="__l"></uni-nav-bar><block wx:if="{{title==='发布任务'||title==='发布作业'}}"><view class="main"><view class="header"><view class="title">标题</view><input class="t_content" type="text" placeholder="请输入作业或任务标题" data-event-opts="{{[['input',[['__set_model',['','taskTitle','$event',[]]]]]]}}" value="{{taskTitle}}" bindinput="__e"/></view><view class="discribe"><textarea class="content" placeholder="请输入详细描述" show-confirm-bar="false" data-event-opts="{{[['input',[['__set_model',['','taskDetail','$event',[]]]]]]}}" value="{{taskDetail}}" bindinput="__e"></textarea></view><view class="bottom"><text style="font-size:12px;color:#db472c;">注：选择图片和文件时每次选择一份，可分多次选择</text><uni-file-picker vue-id="d81588a8-2" image-styles="{{imageStyles}}" title="添加图片" value="{{images}}" data-event-opts="{{[['^select',[['select']]],['^delete',[['delFile']]],['^input',[['__set_model',['','images','$event',[]]]]]]}}" bind:select="__e" bind:delete="__e" bind:input="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="chose">+</view></uni-file-picker><uni-file-picker vue-id="d81588a8-3" file-mediatype="all" title="添加文件" value="{{value}}" data-event-opts="{{[['^select',[['select']]],['^delete',[['delFile']]],['^input',[['__set_model',['','value','$event',[]]]]]]}}" bind:select="__e" bind:delete="__e" bind:input="__e" bind:__l="__l" vue-slots="{{['default']}}"><button class="chose_btn">选择文件</button></uni-file-picker></view></view></block><block wx:else><view class="main"><view class="header"><view class="title">标题</view><block wx:if="{{title==='我的任务'}}"><view class="t_content" style="color:#414141;">{{''+(taskList[index].title||'无')+''}}</view></block><block wx:if="{{title==='我的作业'}}"><view class="t_content" style="color:#414141;">{{''+(workList[index].title||'无')+''}}</view></block></view><view style="position:absolute;right:0;margin:10px;"><text>发布者：</text><text style="background-color:#ec8641;color:#fff;padding:3px;border-radius:3px;">{{pubPerson}}</text></view><view style="color:#666;margin-top:40px;">描述：</view><block wx:if="{{title==='我的任务'}}"><view class="discribe" style="border:0px solid #127ddb;border-radius:0;color:#666;background-color:#f7f7f7;margin-bottom:20px;">{{''+(taskList[index].detail||'空')+''}}</view></block><block wx:if="{{title==='我的任务'&&(filesArr.length||imgFiles.length)}}"><view style="font-size:14px;color:#666;">附件及图片</view></block><block wx:for="{{imgFiles}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{title==='我的任务'}}"><image style="width:50px;height:50px;margin:15px 2px;" src="{{'https://lapichang.top/'+item}}" mode data-event-opts="{{[['tap',[['previewImg',['$0'],[[['imgFiles','',index]]]]]]]}}" bindtap="__e"></image></block></block><view style="display:flex;"><block wx:for="{{filesArr}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{title==='我的任务'}}"><view data-event-opts="{{[['tap',[['viewFile',['$0'],[[['filesArr','',index]]]]]]]}}" class="files_style" bindtap="__e">{{"附件"+(index+1)+''}}</view></block></block></view><block wx:if="{{title==='我的作业'}}"><view class="discribe" style="border:0px solid #127ddb;border-radius:0;color:#666;background-color:#f7f7f7;margin-bottom:20px;">{{''+(workList[index].detail||'空')+''}}</view></block><block wx:if="{{title==='我的作业'&&(filesArr.length||imgFiles.length)}}"><view style="font-size:14px;color:#666;">附件及图片</view></block><block wx:for="{{imgFiles}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{title==='我的作业'}}"><image style="width:50px;height:50px;margin:15px 2px;" src="{{'https://lapichang.top/'+item}}" mode data-event-opts="{{[['tap',[['previewImg',['$0'],[[['imgFiles','',index]]]]]]]}}" bindtap="__e"></image></block></block><view style="display:flex;"><block wx:for="{{filesArr}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{title==='我的作业'}}"><view data-event-opts="{{[['tap',[['viewFile',['$0'],[[['filesArr','',index]]]]]]]}}" class="files_style" bindtap="__e">{{"附件"+(index+1)+''}}</view></block></block></view><block wx:if="{{title==='我的任务'}}"><view style="position:absolute;right:10px;bottom:5px;"><text>截止时间：</text><text style="color:#127ddb;">{{taskList[index].endtime||'未设定'}}</text></view></block><block wx:if="{{title==='我的作业'}}"><view style="position:absolute;right:10px;bottom:5px;"><text>截止时间：</text><text style="color:#127ddb;">{{workList[index].endtime||'未设定'}}</text></view></block></view></block><block wx:if="{{title==='我的任务'&&id===pubId}}"><view data-event-opts="{{[['tap',[['taskUnFinished',['$event']]]]]}}" style="margin-left:560rpx;background-color:#5e9bdb;color:#fff;padding:5px;" bindtap="__e">查看未完成</view></block><block wx:if="{{title==='我的作业'&&id===pubId}}"><view data-event-opts="{{[['tap',[['workUnFinished',['$event']]]]]}}" style="margin-left:560rpx;background-color:#5e9bdb;color:#fff;padding:5px;" bindtap="__e">查看未完成</view></block><block wx:if="{{title==='我的任务'&&id!==pubId||title==='我的作业'&&id!==pubId}}"><view class="bottom"><textarea style="background-color:#f7f7f7;padding:10px;" placeholder="在此键入内容"></textarea><text style="font-size:12px;color:#db472c;">注：不可同时选择图片和选择文件，若要上传多图或多文件请打包好从选择文件按上传</text><uni-file-picker vue-id="d81588a8-4" image-styles="{{imageStyles}}" title="添加图片" limit="{{1}}" value="{{images}}" data-event-opts="{{[['^select',[['select']]],['^delete',[['delFile']]],['^input',[['__set_model',['','images','$event',[]]]]]]}}" bind:select="__e" bind:delete="__e" bind:input="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="chose">+</view></uni-file-picker><uni-file-picker vue-id="d81588a8-5" file-mediatype="all" title="添加文件" limit="{{1}}" value="{{value}}" data-event-opts="{{[['^select',[['select']]],['^delete',[['delFile']]],['^input',[['__set_model',['','value','$event',[]]]]]]}}" bind:select="__e" bind:delete="__e" bind:input="__e" bind:__l="__l" vue-slots="{{['default']}}"><button class="chose_btn">选择文件</button></uni-file-picker></view></block><block wx:if="{{title==='发布任务'||title==='发布作业'}}"><view class="publish_bottom"><view class="end_date"><view class="set">设置截止时间：</view><uni-datetime-picker vue-id="d81588a8-6" type="datetime" border="{{false}}" clear-icon="{{false}}" value="{{datetimesingle}}" data-event-opts="{{[['^change',[['changeLog']]],['^input',[['__set_model',['','datetimesingle','$event',[]]]]]]}}" bind:change="__e" bind:input="__e" bind:__l="__l"></uni-datetime-picker></view><block wx:if="{{title==='发布任务'}}"><button class="pub_btn" hover-class="press_style" hover-stay-time="100" data-event-opts="{{[['tap',[['upload',[1,0]]]]]}}" bindtap="__e">发布</button></block><block wx:else><button class="pub_btn" hover-class="press_style" hover-stay-time="100" data-event-opts="{{[['tap',[['upload',[2,0]]]]]}}" bindtap="__e">发布</button></block></view></block><block wx:if="{{title==='我的任务'&&id!==pubId}}"><button class="sub_btn" hover-class="press_style" hover-stay-time="100" data-event-opts="{{[['tap',[['submitTask',['$event']]]]]}}" bindtap="__e">提交任务</button></block><block wx:if="{{title==='我的作业'&&id!==pubId}}"><button class="sub_btn" hover-class="press_style" hover-stay-time="100" data-event-opts="{{[['tap',[['submitWork',['$event']]]]]}}" bindtap="__e">提交作业</button></block><block wx:if="{{title==='我的任务'&&id===pubId}}"><view class="get_files" hover-class="press_style" hover-stay-time="100" data-event-opts="{{[['tap',[['copyFilesUrl',['$0'],['taskList.'+index+'.id']]]]]}}" bindtap="__e"><image style="width:30px;height:30px;margin-top:15px;margin-left:50px;" src="http://43.138.133.249:8080/pictures/folder.png" mode></image><view class="text">获取已提交文件</view></view></block><block wx:if="{{title==='我的作业'&&id===pubId}}"><view class="get_files" hover-class="press_style" hover-stay-time="100" data-event-opts="{{[['tap',[['copyFilesUrl',['$0'],['workList.'+index+'.id']]]]]}}" bindtap="__e"><image style="width:30px;height:30px;margin-top:15px;margin-left:50px;" src="http://43.138.133.249:8080/pictures/folder.png" mode></image><view class="text">获取已提交文件</view></view></block><block wx:if="{{title==='我的任务'&&id===pubId}}"><button class="end_btn" hover-class="press_style" hover-stay-time="100" data-event-opts="{{[['tap',[['endTask',['$event']]]]]}}" bindtap="__e">结束任务</button></block><block wx:if="{{title==='我的作业'&&id===pubId}}"><button class="end_btn" hover-class="press_style" hover-stay-time="100" data-event-opts="{{[['tap',[['endWork',['$event']]]]]}}" bindtap="__e">结束作业</button></block><mpopup class="vue-ref" vue-id="d81588a8-7" isdistance="{{true}}" data-ref="mpopup" bind:__l="__l"></mpopup><wyb-popup class="pop vue-ref" vue-id="d81588a8-8" type="center" height="800" width="500" radius="6" duration="200" scrollY="{{true}}" data-ref="unfi" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{title==='我的任务'}}"><view><view class="unfinshied_list" style="color:#db472c;">{{"未完成人数("+taskUnFinishedList.length+")"}}</view><block wx:for="{{taskUnFinishedList}}" wx:for-item="item" wx:for-index="index" wx:key="sid"><view class="unfinshied_list">{{''+item.sname+''}}</view></block></view></block><block wx:if="{{title==='我的作业'}}"><view><view class="unfinshied_list" style="color:#db472c;">{{"未完成人数("+workUnFinishedList.length+")"}}</view><block wx:for="{{workUnFinishedList}}" wx:for-item="item" wx:for-index="index" wx:key="sid"><view class="unfinshied_list">{{''+item.sname+''}}</view></block></view></block></wyb-popup><wyb-popup class="pop vue-ref" vue-id="d81588a8-9" type="center" height="800" width="500" radius="6" duration="200" scrollY="{{true}}" data-ref="unfi1" data-event-opts="{{[['^hide',[['endBack',[$root.g0]]]]]}}" bind:hide="__e" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{title==='我的任务'}}"><view><view class="unfinshied_list" style="color:#db472c;">{{"未完成人数("+taskUnFinishedList.length+")必要时请截图"}}</view><block wx:for="{{taskUnFinishedList}}" wx:for-item="item" wx:for-index="index" wx:key="sid"><view class="unfinshied_list">{{''+item.sname+''}}</view></block></view></block><block wx:if="{{title==='我的作业'}}"><view><view class="unfinshied_list" style="color:#db472c;">{{"未完成人数("+workUnFinishedList.length+")必要时请截图"}}</view><block wx:for="{{workUnFinishedList}}" wx:for-item="item" wx:for-index="index" wx:key="sid"><view class="unfinshied_list">{{''+item.sname+''}}</view></block></view></block></wyb-popup></view>